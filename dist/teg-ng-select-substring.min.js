(function(){"use strict";angular.module("TegNgSelectSubstring",["TegNgTextUtils"]).factory("tegNgSelectSubstring",["tegNgTextUtils","$sce",function(t,e){return{select:function(t,n){return e.trustAsHtml(this.selectUnsafe(t,n))},selectUnsafe:function(e,n){var r,s,l,c;for(null==e&&(e=""),s=this.extractWords(n),l=0,c=s.length;c>l;l++)r=s[l],e=this.replaceOneWord(e,r);return e=t.escapeHtml(e),e=e.replace(/__tag_start__/g,"<span class='SelectedSubstring'>"),e.replace(/__tag_end__/g,"</span>")},extractWords:function(t){var e;return null==t&&(t=""),e=t.split(" "),e=e.filter(function(t){return t.length}),e=this.uniqArray(e),e.sort(function(t,e){return t.length-e.length})},replaceOneWord:function(e,n){var r,s,l;return s=t.escapeRegexp(n),r=new RegExp("\\b("+s+")","gi"),l="__tag_start__$1__tag_end__",e.replace(r,l)},uniqArray:function(t){return t.filter(function(t,e,n){return n.indexOf(t)===e})}}}])}).call(this);