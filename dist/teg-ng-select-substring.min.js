(function(){"use strict";angular.module("TegNgSelectSubstring",["TegNgTextUtils"]).factory("tegNgSelectSubstring",["tegNgTextUtils","$sce",function(e,t){return{select:function(e,r){return t.trustAsHtml(this.selectUnsafe(e,r))},selectUnsafe:function(e,t){var r,n,c,a;for(n=this.extractWords(t),c=0,a=n.length;a>c;c++)r=n[c],e=this.replaceOneWord(e,r);return e=this.escapeHtml(e),e=e.replace(/__tag_start__/g,"<span class='SelectedSubstring'>"),e.replace(/__tag_end__/g,"</span>")},extractWords:function(e){var t;return t=e.split(" "),t=t.filter(function(e){return e.length}),t=this.uniqArray(t),t.sort(function(e,t){return e.length-t.length})},replaceOneWord:function(t,r){var n,c,a;return c=e.escapeRegexp(r),n=new RegExp("\\b("+c+")","gi"),a="__tag_start__$1__tag_end__",t.replace(n,a)},uniqArray:function(e){return e.filter(function(e,t,r){return r.indexOf(e)===t})},escapeHtml:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}}}])}).call(this);